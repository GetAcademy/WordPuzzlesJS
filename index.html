<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body onload="readFile()">


    <script>
        function generateWordPuzzles(words) {
            let wordCount = 0;
            while (wordCount < 10) {
                let randomIndex = Math.floor(Math.random() * words.length);
                let word1 = words[randomIndex].trim();
                if (word1.length > 6) {
                    let lastPartOfWord1 = word1.substr(word1.length - 3);
                    for (let otherWord of words) {
                        if (otherWord.length > 6 && otherWord != word1 && otherWord.startsWith(lastPartOfWord1)) {
                            let firstPartOfWord1 = word1.substr(0, word1.length - 3);
                            let lastPartOfOtherWord = otherWord.substr(3);
                            document.body.innerHTML += /*HTML*/`
                                <div>
                                    ${firstPartOfWord1}___ ___${lastPartOfOtherWord}
                                    <button onclick="this.innerHTML = '${word1} ${otherWord.trim()}'">?</button>
                                </div>
                                `;
                            wordCount++;
                            break;
                        }
                    }
                }
            }
        }

        async function readFile() {
            const response = await fetch('words.txt');
            if (!response.ok) {
                document.body.innerHTML = 'Feil i lesing av ordliste';
                return;
            }
            let fileContent = await response.text();
            const words = fileContent.split('\n');
            generateWordPuzzles(words);
        }
    </script>
</body>

</html>